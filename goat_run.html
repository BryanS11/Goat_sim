<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Python: module goat_run</title>
</head><body>

<table class="heading">
<tr class="heading-text decor">
<td class="title">&nbsp;<br><strong class="title">goat_run</strong></td>
<td class="extra"><a href=".">index</a><br><a href="file:c%3A%5Cusers%5Cbstru%5Cdocuments%5Cproj2_soft%5Cgoat_run.py">c:\users\bstru\documents\proj2_soft\goat_run.py</a></td></tr></table>
    <p><span class="code">goat_simulation.py<br>
&nbsp;<br>
This&nbsp;script&nbsp;simulates&nbsp;a&nbsp;goat&nbsp;AI&nbsp;behavior&nbsp;in&nbsp;a&nbsp;2D&nbsp;pen&nbsp;environment&nbsp;where&nbsp;goats&nbsp;attempt<br>
to&nbsp;exit&nbsp;the&nbsp;pen&nbsp;by&nbsp;navigating&nbsp;toward&nbsp;a&nbsp;randomly&nbsp;placed&nbsp;exit&nbsp;point.&nbsp;The&nbsp;simulation&nbsp;uses<br>
GPU&nbsp;acceleration&nbsp;(via&nbsp;PyTorch)&nbsp;to&nbsp;simulate&nbsp;goat&nbsp;movements&nbsp;in&nbsp;parallel.&nbsp;The&nbsp;simulation<br>
logs&nbsp;goat&nbsp;movement&nbsp;data&nbsp;and&nbsp;creates&nbsp;a&nbsp;visualization&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;simulation.<br>
&nbsp;<br>
Dependencies:<br>
-&nbsp;PyTorch&nbsp;(GPU&nbsp;acceleration&nbsp;support)<br>
-&nbsp;Numpy<br>
-&nbsp;Matplotlib&nbsp;(for&nbsp;visualization)<br>
&nbsp;<br>
The&nbsp;script&nbsp;performs&nbsp;the&nbsp;following:<br>
1.&nbsp;Initializes&nbsp;a&nbsp;random&nbsp;pen&nbsp;with&nbsp;randomly&nbsp;placed&nbsp;goats.<br>
2.&nbsp;Simulates&nbsp;goat&nbsp;movement&nbsp;toward&nbsp;an&nbsp;exit&nbsp;point&nbsp;until&nbsp;all&nbsp;goats&nbsp;exit.<br>
3.&nbsp;Logs&nbsp;goat&nbsp;movements&nbsp;to&nbsp;a&nbsp;CSV&nbsp;file&nbsp;('goat_movements.csv').<br>
4.&nbsp;Generates&nbsp;an&nbsp;animated&nbsp;simulation&nbsp;GIF&nbsp;of&nbsp;goat&nbsp;movements.</span></p>
<p>
<table class="section">
<tr class="decor pkg-content-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><strong class="bigsection">Modules</strong></td></tr>
    
<tr><td class="decor pkg-content-decor"><span class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>&nbsp;</td>
<td class="singlecolumn"><table><tr><td class="multicolumn"><a href="csv.html">csv</a><br>
<a href="numpy.html">numpy</a><br>
</td><td class="multicolumn"><a href="matplotlib.pyplot.html">matplotlib.pyplot</a><br>
<a href="random.html">random</a><br>
</td><td class="multicolumn"><a href="torch.html">torch</a><br>
</td><td class="multicolumn"></td></tr></table></td></tr></table><p>
<table class="section">
<tr class="decor functions-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><strong class="bigsection">Functions</strong></td></tr>
    
<tr><td class="decor functions-decor"><span class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt><a name="-load_movement_log"><strong>load_movement_log</strong></a>(filename)</dt><dd><span class="code">Loads&nbsp;the&nbsp;goat&nbsp;movement&nbsp;log&nbsp;from&nbsp;a&nbsp;CSV&nbsp;file.<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;filename&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;movement&nbsp;log&nbsp;CSV&nbsp;file.<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;dict:&nbsp;A&nbsp;dictionary&nbsp;containing&nbsp;goat&nbsp;IDs&nbsp;as&nbsp;keys&nbsp;and&nbsp;movement&nbsp;paths&nbsp;as&nbsp;values.</span></dd></dl>
 <dl><dt><a name="-move_goats"><strong>move_goats</strong></a>(grid, goat_positions_tensor, exited_flags, exit_row, exit_col)</dt><dd><span class="code">Simulates&nbsp;the&nbsp;movement&nbsp;of&nbsp;goats&nbsp;toward&nbsp;the&nbsp;exit&nbsp;in&nbsp;parallel&nbsp;using&nbsp;GPU&nbsp;acceleration.<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;grid&nbsp;(torch.Tensor):&nbsp;The&nbsp;2D&nbsp;simulation&nbsp;grid&nbsp;representing&nbsp;the&nbsp;environment.<br>
&nbsp;&nbsp;&nbsp;&nbsp;goat_positions_tensor&nbsp;(torch.Tensor):&nbsp;Tensor&nbsp;containing&nbsp;the&nbsp;positions&nbsp;of&nbsp;goats.<br>
&nbsp;&nbsp;&nbsp;&nbsp;exited_flags&nbsp;(torch.Tensor):&nbsp;A&nbsp;tensor&nbsp;to&nbsp;track&nbsp;if&nbsp;a&nbsp;goat&nbsp;has&nbsp;exited.<br>
&nbsp;&nbsp;&nbsp;&nbsp;exit_row&nbsp;(int):&nbsp;The&nbsp;row&nbsp;index&nbsp;of&nbsp;the&nbsp;exit&nbsp;point.<br>
&nbsp;&nbsp;&nbsp;&nbsp;exit_col&nbsp;(int):&nbsp;The&nbsp;column&nbsp;index&nbsp;of&nbsp;the&nbsp;exit&nbsp;point.</span></dd></dl>
 <dl><dt><a name="-visualize_movements"><strong>visualize_movements</strong></a>(grid_size, movement_log, exit_position, output_file='goat_simulation.gif')</dt><dd><span class="code">Creates&nbsp;and&nbsp;saves&nbsp;a&nbsp;visualization&nbsp;of&nbsp;goat&nbsp;movement&nbsp;paths&nbsp;using&nbsp;matplotlib.<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;grid_size&nbsp;(int):&nbsp;Size&nbsp;of&nbsp;the&nbsp;simulation&nbsp;grid.<br>
&nbsp;&nbsp;&nbsp;&nbsp;movement_log&nbsp;(dict):&nbsp;Dictionary&nbsp;containing&nbsp;goat&nbsp;movement&nbsp;logs.<br>
&nbsp;&nbsp;&nbsp;&nbsp;exit_position&nbsp;(tuple):&nbsp;Coordinates&nbsp;of&nbsp;the&nbsp;exit&nbsp;point&nbsp;in&nbsp;the&nbsp;simulation.<br>
&nbsp;&nbsp;&nbsp;&nbsp;output_file&nbsp;(str):&nbsp;Output&nbsp;path&nbsp;to&nbsp;save&nbsp;the&nbsp;generated&nbsp;simulation&nbsp;visualization.</span></dd></dl>
</td></tr></table><p>
<table class="section">
<tr class="decor data-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><strong class="bigsection">Data</strong></td></tr>
    
<tr><td class="decor data-decor"><span class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>&nbsp;</td>
<td class="singlecolumn"><strong>GRID_SIZE</strong> = 13<br>
<strong>INNER_GRID_SIZE</strong> = 11<br>
<strong>NUM_GOATS</strong> = 60<br>
<strong>exit_col</strong> = 2<br>
<strong>exit_row</strong> = 0<br>
<strong>exited_flags</strong> = tensor([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...0, 0], device='cuda:0',
       dtype=torch.int32)<br>
<strong>goat_positions</strong> = [(10, 9), (6, 1), (1, 5), (9, 8), (2, 6), (8, 4), (8, 6), (4, 5), (5, 4), (10, 11), (6, 7), (10, 4), (7, 3), (8, 1), (4, 1), (3, 5), (10, 2), (2, 1), (9, 7), (5, 6), ...]<br>
<strong>goat_positions_tensor</strong> = tensor([[10,  9],
        [ 6,  1],
        [ 1,...   [ 5,  2]], device='cuda:0', dtype=torch.int32)<br>
<strong>grid</strong> = tensor([[0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],..., 0]], device='cuda:0',
       dtype=torch.int32)<br>
<strong>movement_log</strong> = {0: [(5, 10), (5, 10), (4, 10), (3, 10), (3, 10), (3, 9), (2, 9), (3, 9), (4, 9), (4, 9), (4, 9), (4, 9), (4, 9), (4, 9), (4, 9), (4, 9), (4, 9), (4, 9), (5, 9), (6, 9), ...], 1: [(1, 11), (1, 11), (1, 11), (1, 11), (1, 11), (1, 11), (1, 11), (1, 11), (1, 11), (1, 11), (2, 11), (3, 11), (4, 11), (4, 11), (4, 10), (4, 11), (5, 11), (5, 11), (5, 11), (4, 11), ...], 2: [(11, 11), (10, 11), (10, 10), (10, 11), (10, 11), (10, 11), (11, 11), (-1, -1)], 3: [(5, 1), (5, 1), (5, 1), (5, 1), (5, 2), (5, 2), (4, 2), (3, 2), (4, 2), (4, 2), (5, 2), (5, 2), (6, 2), (6, 2), (6, 2), (6, 2), (6, 2), (7, 2), (6, 2), (6, 2), ...], 4: [(11, 6), (11, 7), (11, 8), (11, 8), (11, 8), (11, 8), (11, 8), (11, 8), (11, 8), (11, 9), (11, 10), (11, 9), (11, 9), (11, 9), (11, 9), (11, 10), (11, 10), (11, 10), (11, 10), (11, 9), ...], 5: [(7, 3), (7, 2), (6, 2), (6, 3), (6, 3), (6, 3), (6, 3), (7, 3), (7, 3), (7, 3), (7, 3), (7, 3), (7, 3), (7, 3), (7, 3), (7, 4), (8, 4), (8, 4), (8, 4), (8, 5), ...], 6: [(10, 5), (9, 5), (9, 5), (8, 5), (8, 4), (8, 3), (8, 4), (7, 4), (7, 4), (7, 4), (7, 4), (7, 4), (7, 4), (7, 5), (7, 5), (7, 6), (6, 6), (6, 5), (6, 6), (6, 6), ...], 7: [(6, 4), (6, 4), (6, 4), (6, 4), (6, 4), (6, 4), (6, 4), (6, 4), (6, 4), (6, 4), (6, 5), (6, 4), (6, 4), (6, 3), (6, 3), (7, 3), (7, 4), (7, 4), (7, 4), (7, 3), ...], 8: [(11, 1), (11, 1), (11, 1), (11, 1), (10, 1), (10, 1), (10, 1), (10, 1), (9, 1), (9, 1), (8, 1), (8, 1), (8, 2), (8, 2), (7, 2), (7, 2), (7, 3), (7, 3), (7, 2), (7, 1), ...], 9: [(6, 10), (6, 9), (6, 9), (6, 9), (6, 10), (6, 9), (6, 9), (6, 9), (5, 9), (5, 9), (5, 9), (5, 10), (5, 10), (5, 9), (5, 9), (5, 9), (5, 9), (5, 10), (5, 10), (5, 9), ...], ...}<br>
<strong>x</strong> = 5<br>
<strong>y</strong> = 2</td></tr></table>
</body></html>